# Council-AI GAS Frontend 테스트 가이드

## 📋 테스트 체크리스트

### 1. 사전 준비

#### GCP Console 설정
- [ ] Google Picker API 활성화
- [ ] OAuth 2.0 동의 화면 구성
- [ ] Script Properties 설정:
  - `API_BASE_URL`: 백엔드 API 주소 (예: `https://your-backend.com/api/v1`)
  - `API_KEY`: 백엔드 API 키
  - `PICKER_API_KEY`: Google Picker API 키

#### clasp 배포
```bash
cd frontend
clasp push
clasp deploy
```

---

### 2. Chat 탭 테스트

#### 2.1 기본 채팅 기능
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 메시지 입력 후 Enter | 메시지 전송, 타이핑 인디케이터 표시 | ☐ |
| Shift+Enter | 줄바꿈 (전송 안됨) | ☐ |
| 빈 메시지 전송 | "메시지를 입력해주세요" 토스트 | ☐ |
| API 응답 수신 | Markdown 렌더링, 응답 시간/모델 표시 | ☐ |
| 코드 블록 응답 | 구문 강조, 복사 버튼 표시 | ☐ |
| 소스 링크 | 토글 버튼, 관련도 점수 뱃지 표시 | ☐ |

#### 2.2 세션 관리
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 대화 진행 후 사이드바 닫기→재열기 | 이전 대화 복원 | ☐ |
| 대화 초기화 버튼 | 확인 다이얼로그 → 대화 삭제 | ☐ |

---

### 3. Docs 탭 테스트 (Smart Minutes)

#### 3.1 문서 선택
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 안건지 📂 선택 버튼 | Google Picker 열림 | ☐ |
| 문서 선택 | 문서 ID 입력, 이름 표시 | ☐ |
| 폴더 📁 선택 버튼 | 폴더 Picker 열림 | ☐ |

#### 3.2 템플릿 검사
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 템플릿 선택 후 검사 버튼 | Placeholder 목록 alert | ☐ |
| Placeholder 없는 문서 | 경고 메시지 표시 | ☐ |

#### 3.3 결과지 생성
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 필수 필드 미입력 | 유효성 경고 토스트 | ☐ |
| 생성 버튼 클릭 | 4단계 Progress 표시, 타이머 시작 | ☐ |
| 각 단계 진행 | ⬜ → ⏳ → ✅ 아이콘 변화 | ☐ |
| 생성 완료 | 결과 링크 + 복사 버튼 + 소요 시간 | ☐ |
| 결과지 열기 | 새 탭에서 Google Docs 열림 | ☐ |
| 링크 복사 버튼 | 클립보드 복사, 성공 토스트 | ☐ |

---

### 4. Calendar 탭 테스트

#### 4.1 할일 추출
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 결과지 미선택 후 추출 | 경고 토스트 | ☐ |
| 추출 버튼 클릭 | 진행 상태 표시 | ☐ |
| 추출 완료 | Todo 카드 목록 표시, 개수 뱃지 | ☐ |
| 과거 날짜 항목 | 오렌지 테두리 + "(과거)" 표시 | ☐ |

#### 4.2 할일 편집
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 할일 내용 수정 | 인라인 편집 가능 | ☐ |
| 날짜 변경 | 날짜 선택기 작동 | ☐ |
| 담당자 이메일 입력 | 이메일 형식 검증 | ☐ |
| 전체 선택 토글 | 모든 체크박스 상태 변경 | ☐ |
| 개별 체크 해제 | 선택 개수 업데이트 | ☐ |

#### 4.3 캘린더 등록
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 선택 없이 등록 | 경고 토스트 | ☐ |
| 유효하지 않은 항목 | 경고 alert (건너뜀) | ☐ |
| 등록 진행 | 프로그레스 바 + 카운트 표시 | ☐ |
| 등록 완료 | 성공/실패 개수 결과 표시 | ☐ |
| 성공 항목 | 녹색 배경 + 체크 해제 | ☐ |
| Google 캘린더 확인 링크 | 새 탭에서 캘린더 열림 | ☐ |

---

### 5. Admin 탭 테스트

#### 5.1 자료 학습 (Ingestion)
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 폴더 선택 | Picker로 폴더 선택 | ☐ |
| 학습 시작 | 진행 상태 표시 | ☐ |
| 학습 완료 | 성공 토스트, 문서 목록 새로고침 | ☐ |

#### 5.2 인수인계서 생성
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 연도 미선택 | 유효성 경고 | ☐ |
| 생성 버튼 | 4단계 Progress 표시 | ☐ |
| 생성 완료 | 결과 링크 + 복사 버튼 | ☐ |

#### 5.3 API 설정
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 설정 로드 | 기존 API URL 표시, Key 상태 표시 | ☐ |
| 설정 저장 | 성공 토스트, 상태 업데이트 | ☐ |

#### 5.4 학습된 문서 목록
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 새로고침 버튼 | 문서 목록 재로드 | ☐ |
| 문서 상태 아이콘 | ✅ 완료 / ⏳ 처리중 / ❌ 실패 | ☐ |

---

### 6. 공통 기능 테스트

#### 6.1 탭 네비게이션
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 탭 클릭 | 해당 콘텐츠 표시, 탭 하이라이트 | ☐ |
| 마지막 탭 저장 | 사이드바 재열기 시 복원 | ☐ |

#### 6.2 토스트 메시지
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 성공 토스트 | 녹색 배경, ✅ 아이콘 | ☐ |
| 에러 토스트 | 빨간색 배경, ❌ 아이콘 | ☐ |
| 경고 토스트 | 노란색 배경, ⚠️ 아이콘 | ☐ |
| 자동 사라짐 | 3초 후 슬라이드아웃 | ☐ |

#### 6.3 로딩 상태
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|------|
| 버튼 로딩 | 스피너로 교체, 비활성화 | ☐ |
| 오버레이 로딩 | 반투명 배경 + 스피너 | ☐ |

---

## 🐛 알려진 이슈

1. **Picker API Key**: GCP Console에서 별도로 발급 필요 (OAuth 토큰과 별개)
2. **CORS**: 백엔드가 GAS 요청을 허용해야 함
3. **OAuth Scope**: 처음 실행 시 권한 동의 필요

---

## 📝 테스트 노트

```
테스터:
테스트 일자:
환경: Google Docs / Sheets
브라우저:
백엔드 버전:

추가 메모:
```

---

## 🔧 디버깅

### Console 로그 확인
1. 사이드바에서 F12 → Console
2. `[Council-AI]` 접두사 로그 확인

### Apps Script 로그
1. Apps Script 에디터 → 실행 → 실행 로그
2. `console.log()` 출력 확인

### API 응답 확인
```javascript
// Utils.gs의 callAPI 함수에 로그 추가
console.log('API Response:', response.getContentText());
```
